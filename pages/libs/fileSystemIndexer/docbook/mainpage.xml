<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<chapter xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_mainpage" xml:lang="en-US">
<title>
<para>File System Indexer </para>
</title>
<indexterm><primary>File System Indexer</primary></indexterm>

<para><anchor xml:id="_index_1md_README"/></para>
<section xml:id="_index_1autotoc_md1">
<title>Last version updated: v0.1.0-beta</title>
<para><informaltable frame='bottom'><tgroup cols='1'><colspec align='center'/><tbody><row><entry align='center'>
</entry></row></tbody></tgroup></informaltable>
</para>
</section>
<section xml:id="_index_1autotoc_md3">
<title>Support information</title>
<para><itemizedlist>
<listitem>
<para>FSI Currently does not support Windows</para>
</listitem><listitem>
<para>Currently Linux and macOS* with other POSIX / UNIX systems</para>
</listitem></itemizedlist>
</para>
</section>
<section xml:id="_index_1autotoc_md4">
<title>What is FSI?</title>
<para>File System Indexer or FSI is a C++ library that it can be used to index files quickly with an extendible and easy to use API</para>

<para>There is also an API for C which is just for <emphasis>speed-first</emphasis> use cases such as indexing or other usages</para>
</section>
<section xml:id="_index_1autotoc_md5">
<title>Requirements</title>
<para>To compile this program, you will need the following dependencies</para>

<para><orderedlist>
<listitem>
<para>C11+ / C++17+ compiler</para>
</listitem><listitem>
<para>jq</para>
</listitem><listitem>
<para>Bash</para>
</listitem><listitem>
<para>Ninja / Make (Ninja is prefered)</para>
</listitem><listitem>
<para>CMake</para>
</listitem></orderedlist>
</para>
</section>
<section xml:id="_index_1autotoc_md6">
<title>How to Compile</title><section xml:id="_index_1autotoc_md7">
<title>Setting up</title>
<para>The developer can compile the code with the following snippet <literallayout><computeroutput>./gen.sh&#32;#&#32;Generate&#32;all&#32;the&#32;required&#32;files&#32;and&#32;docs
./compile.sh&#32;settings&#32;#&#32;Developer&#32;will&#32;be&#32;prompted&#32;for&#32;config;&#32;If&#32;doxygen&#32;is&#32;not&#32;installed,&#32;it&#32;will&#32;still&#32;work
</computeroutput></literallayout></para>
</section>
<section xml:id="_index_1autotoc_md8">
<title>Developer Mode</title>
<para>With developer mode, you can get more information about unexpected crashes, have ASAN / LSAN support, debug support, ...</para>

<para><literallayout><computeroutput>./compile.sh&#32;setup
</computeroutput></literallayout></para>
</section>
<section xml:id="_index_1autotoc_md9">
<title>Production Mode</title>
<para>Do not use dev mode here, just compile as prod; No information about crashes, no debug or ASAN / LSAN support</para>

<para><literallayout><computeroutput>./compile.sh&#32;setup&#32;ndev
</computeroutput></literallayout></para>
</section>
<section xml:id="_index_1autotoc_md10">
<title>Compile the sources</title>
<para><literallayout><computeroutput>./compile.sh
</computeroutput></literallayout></para>
</section>
<section xml:id="_index_1autotoc_md11">
<title>Run the Tests</title>
<para>There is a basic bash script with some utilities that you can execute the executable directly</para>

<para><literallayout><computeroutput>./run.sh
</computeroutput></literallayout></para>
</section>
</section>
<section xml:id="_index_1autotoc_md12">
<title>Basic usage</title>
<para>In this example you can directly add a specific directory without its parents <literallayout><computeroutput>fsi::IndexerInfo&#32;info;&#32;//&#32;Create&#32;object
info.path&#32;=&#32;&quot;/path/to/fileOrDir&quot;;&#32;//&#32;Set&#32;the&#32;path
info.id&#32;=&#32;&quot;optional-id&quot;;&#32;//&#32;Recommended&#32;to&#32;set&#32;an&#32;ID

indexer.addInfo(info);&#32;//&#32;Add&#32;indexer&#32;info
</computeroutput></literallayout></para>

<para>Recursively index a specific dir <literallayout><computeroutput>fsi::IndexerInfo&#32;info;
info.path&#32;=&#32;&quot;/path/to/directory&quot;;
info.id&#32;=&#32;&quot;optional-id&quot;;

indexer.addExtendedInfo(info);&#32;//&#32;Add&#32;all&#32;its&#32;subdirs&#32;starting&#32;from&#32;`info.path`
</computeroutput></literallayout></para>
</section>
<section xml:id="_index_1autotoc_md13">
<title>Search and manipulate indexed info</title>
<para>This following example will search everything in the registry and output the matching In this case, everything that includes <computeroutput>txt</computeroutput> <literallayout><computeroutput>std::vector&lt;std::string&gt;&#32;results&#32;=&#32;indexer.searchMatching(&quot;txt&quot;);
</computeroutput></literallayout></para>

<para>Get all the indexed paths directly in a vector <literallayout><computeroutput>std::vector&lt;std::string&gt;&#32;allPaths&#32;=&#32;indexer.getIndexPaths();
</computeroutput></literallayout></para>

<para>Get specific indexed info from the vector registry <literallayout><computeroutput>fsi::IndexerInfo&#32;info&#32;=&#32;indexer.findIndex(&quot;/path/to/path&quot;);
fsi::IndexerInfo&#32;info&#32;=&#32;indexer.findIndex(&quot;id-path&quot;);&#32;//&#32;Or&#32;search&#32;via&#32;ID
</computeroutput></literallayout></para>

<para><literallayout><computeroutput>indexer.removeInfo(&quot;current-dir&quot;);
</computeroutput></literallayout></para>
</section>
<section xml:id="_index_1autotoc_md14">
<title>How to handle errors automatically</title>
<para>Replace <computeroutput>errorVariable</computeroutput> to a variable that has a type of <computeroutput>IndexerError</computeroutput> <literallayout><computeroutput>if&#32;(__FSI_INDEXERERR_CHECK(errorVariable))&#32;&#32;
{
&#32;&#32;&#32;&#32;//&#32;Error&#32;handling&#32;here
&#32;&#32;&#32;&#32;//&#32;...
&#32;&#32;&#32;&#32;//&#32;Print&#32;message&#32;by&#32;accessing:
&#32;&#32;&#32;&#32;//&#32;errorVariable.message
}
</computeroutput></literallayout></para>
</section>
<section xml:id="_index_1autotoc_md15">
<title>Example usage</title>
<para><literallayout><computeroutput>#include&#32;&lt;iostream&gt;

#include&#32;&quot;/path/to/FSI_Indexer.hpp&quot;

int&#32;main()
{
&#32;&#32;&#32;&#32;fsi::Indexer&#32;indexer(&quot;main-indexer&quot;);

&#32;&#32;&#32;&#32;{
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;fsi::IndexerInfo&#32;info;
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;info.path&#32;=&#32;&quot;/path/to/dir&quot;;
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;info.id&#32;=&#32;&quot;current-dir&quot;;

&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;indexer.addExtendedInfo(info);
&#32;&#32;&#32;&#32;}

&#32;&#32;&#32;&#32;for&#32;(const&#32;auto&#32;&amp;x&#32;:&#32;indexer.searchMatching(&quot;cpp&quot;))
&#32;&#32;&#32;&#32;{
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;std::cout&#32;&lt;&lt;&#32;x&#32;&lt;&lt;&#32;&quot;\n&quot;;
&#32;&#32;&#32;&#32;}

&#32;&#32;&#32;&#32;std::cout&#32;&lt;&lt;&#32;&quot;ID&#32;`current-dir`&#32;has&#32;path:&quot;&#32;&lt;&lt;&#32;indexer.findIndex(&quot;current-dir&quot;).path&#32;&lt;&lt;&#32;&quot;\n&quot;;

&#32;&#32;&#32;&#32;return&#32;0;
}
</computeroutput></literallayout> </para>
</section>
</chapter>
